# 快速启动指南 ⚡

> 5 分钟上手云效到 K8s 镜像版本自动更新工具

---

## 📦 一、安装依赖 (仅首次)

```bash
cd /Users/chenchen/Documents/work/yx2k8s

# 安装 Python 依赖
pip3 install -r requirements.txt

# 安装 Playwright 浏览器
playwright install chromium
```

预计耗时: **2-3 分钟**

---

## 🚀 二、运行工具

### 方式 1: 使用快捷脚本 (推荐)

```bash
./run.sh
```

### 方式 2: 直接运行

```bash
python3 main.py
```

---

## 🔐 三、首次登录 (仅首次)

首次运行会自动打开浏览器,需要手动登录:

1. **云效登录**: 在云效页面手动登录阿里云账号
2. **K8s 登录**: 在 K8s 控制台手动登录

登录后,脚本会自动保存登录状态到 `auth.json`,**后续无需再登录**!

---

## ⏳ 四、等待完成

工具会自动执行以下步骤:

```
✅ 访问云效 → 触发构建 → 等待完成 → 获取版本号
                    ↓
✅ 访问 K8s → 打开配置 → 填入版本 → 确认更新
                    ↓
               🎉 完成!
```

**预计总耗时**: 5-10 分钟 (主要是等待构建)

---

## 📊 五、成功标志

看到以下输出即表示成功:

```bash
============================================================
🎉 任务全部完成! 耗时: 5分26秒
============================================================
```

并且:
- ✅ K8s 中 Deployment 的镜像版本已更新
- ✅ `auth.json` 文件已生成

---

## ❓ 遇到问题?

### 1. 查看截图
失败时会自动截图:
```bash
ls screenshots/
```

### 2. 查看详细文档
- [README.md](README.md) - 完整使用文档
- [TEST_GUIDE.md](TEST_GUIDE.md) - 测试和排查指南

### 3. 常见问题

**Q: 如何切换账号?**
```bash
rm auth.json
python3 main.py
```

**Q: 如何后台运行?**
修改 `config.py`:
```python
HEADLESS = True
```

**Q: 构建超时怎么办?**
修改 `config.py`:
```python
BUILD_TIMEOUT = 600000  # 改为 10 分钟
```

---

## 🎯 下次运行

后续运行非常简单,只需:

```bash
./run.sh
```

或

```bash
python3 main.py
```

全自动完成,无需任何手动操作! 🚀

---

**就是这么简单!** 有问题随时反馈 😊
